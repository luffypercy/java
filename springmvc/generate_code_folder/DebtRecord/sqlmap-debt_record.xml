<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<!-- 逾期债权购买记录 -->
<sqlMap namespace="com.yjd.comm.debt.model.DebtRecordModel">
	
	<!-- 新增 -->
	<insert id="insert" parameterClass="com.yjd.comm.debt.model.DebtRecordModel">
		insert into `yjd_debt_record` (
		<dynamic prepend=" ">  
			<isNotEmpty prepend=","   property="id">
			<![CDATA[ `id` ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="borrow_id">
			<![CDATA[ `borrow_id` ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="borrow_title">
			<![CDATA[ `borrow_title` ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="admin_id">
			<![CDATA[ `admin_id` ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="price">
			<![CDATA[ `price` ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="limit">
			<![CDATA[ `limit` ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="status">
			<![CDATA[ `status` ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="addtime">
			<![CDATA[ `addtime` ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="uptime">
			<![CDATA[ `uptime` ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="version">
			<![CDATA[ `version` ]]>
			</isNotEmpty>
		</dynamic>
		)
		values(
	   <dynamic prepend=" ">  
			<isNotEmpty prepend=","  property="id">
			<![CDATA[ #id# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","  property="borrow_id">
			<![CDATA[ #borrow_id# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","  property="borrow_title">
			<![CDATA[ #borrow_title# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","  property="admin_id">
			<![CDATA[ #admin_id# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","  property="price">
			<![CDATA[ #price# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","  property="limit">
			<![CDATA[ #limit# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","  property="status">
			<![CDATA[ #status# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","  property="addtime">
			<![CDATA[ #addtime# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","  property="uptime">
			<![CDATA[ #uptime# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","  property="version">
			<![CDATA[ #version# ]]>
			</isNotEmpty>
		</dynamic>
		)
		<selectKey resultClass="java.lang.Long" keyProperty="id" type="post"> 
		<![CDATA[select last_insert_id() as id ]]>
		</selectKey>
	</insert>
	
	<!-- 批量插入 -->
	<insert id="insertBatch" parameterClass="java.util.List">
		insert into `yjd_debt_record` (`id`,`borrow_id`,`borrow_title`,`admin_id`,`price`,`limit`,`status`,`addtime`,`uptime`,`version`)
		values
		<iterate conjunction=",">
		(#item[].id#,#item[].borrow_id#,#item[].borrow_title#,#item[].admin_id#,#item[].price#,#item[].limit#,#item[].status#,#item[].addtime#,#item[].uptime#,#item[].version#)
		</iterate>
	</insert>

	<!-- 修改 -->
	<update id="update" parameterClass="com.yjd.comm.debt.model.DebtRecordModel">
		update `yjd_debt_record` 
		<dynamic prepend="SET ">  
			<isNotEmpty prepend=","   property="borrow_id">
			<![CDATA[ `borrow_id` = #borrow_id# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="borrow_title">
			<![CDATA[ `borrow_title` = #borrow_title# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="admin_id">
			<![CDATA[ `admin_id` = #admin_id# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="price">
			<![CDATA[ `price` = #price# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="limit">
			<![CDATA[ `limit` = #limit# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="status">
			<![CDATA[ `status` = #status# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="addtime">
			<![CDATA[ `addtime` = #addtime# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="uptime">
			<![CDATA[ `uptime` = #uptime# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="version">
			<![CDATA[ `version` = #version# ]]>
			</isNotEmpty>
		 </dynamic>  
		<dynamic prepend="where">
			<isNotEmpty prepend="AND" property="id">
			<![CDATA[ `id` = #id# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="where_version">
			<![CDATA[ `version` = #where_version# ]]>
			</isNotEmpty>
		</dynamic>
	</update>
	
	<!-- 修改 -->
	<update id="updateByMap" parameterClass="map">
		update `yjd_debt_record` 
		<dynamic prepend="SET ">  
			<isNotEmpty prepend=","   property="borrow_id">
			<![CDATA[ `borrow_id` = #borrow_id# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="borrow_title">
			<![CDATA[ `borrow_title` = #borrow_title# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="admin_id">
			<![CDATA[ `admin_id` = #admin_id# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="price">
			<![CDATA[ `price` = #price# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="limit">
			<![CDATA[ `limit` = #limit# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="status">
			<![CDATA[ `status` = #status# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="addtime">
			<![CDATA[ `addtime` = #addtime# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="uptime">
			<![CDATA[ `uptime` = #uptime# ]]>
			</isNotEmpty>
			<isNotEmpty prepend=","   property="version">
			<![CDATA[ `version` = #version# ]]>
			</isNotEmpty>
		 </dynamic>  
		<dynamic prepend="where">
			<isNotEmpty prepend="AND" property="id">
			<![CDATA[ `id` = #id# ]]>
			</isNotEmpty>
		</dynamic>
	</update>
	
	<!-- 删除 -->
	<delete id="delete" parameterClass="map">
		<![CDATA[
			delete from `yjd_debt_record`
		]]>
		<dynamic prepend="where">
			<isNotEmpty prepend="AND" property="id">
			<![CDATA[ `id` = #id# ]]>
			</isNotEmpty>
		</dynamic>
	</delete>

	<sql id="findSql">
		<dynamic prepend="where">
			<isNotEmpty prepend="AND" property="id">
			<![CDATA[ a.`id` = #id# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="borrow_id">
			<![CDATA[ a.`borrow_id` = #borrow_id# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="borrow_title">
			<![CDATA[ a.`borrow_title` = #borrow_title# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="admin_id">
			<![CDATA[ a.`admin_id` = #admin_id# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="price">
			<![CDATA[ a.`price` = #price# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="limit">
			<![CDATA[ a.`limit` = #limit# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="status">
			<![CDATA[ a.`status` = #status# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="addtime">
			<![CDATA[ a.`addtime` = #addtime# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="uptime">
			<![CDATA[ a.`uptime` = #uptime# ]]>
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="version">
			<![CDATA[ a.`version` = #version# ]]>
			</isNotEmpty>
		</dynamic>
	</sql>
	
	<select id="getModelListCount" parameterClass="map"
		resultClass="int">
		<![CDATA[
			select count(*)
			  from `yjd_debt_record` a
		]]>
		<include refid="findSql" />
	</select>

	<select id="getModelList" parameterClass="map"
		resultClass="com.yjd.comm.debt.model.DebtRecordModel">
		<include refid="global.pageStart" />
		<![CDATA[
			select 
			   a.`id`,
			   a.`borrow_id`,
			   a.`borrow_title`,
			   a.`admin_id`,
			   a.`price`,
			   a.`limit`,
			   a.`status`,
			   a.`addtime`,
			   a.`uptime`,
			   a.`version`
			FROM `yjd_debt_record`  a
		]]>
		<include refid="findSql" />
		<include refid="global.globalSortsql" />
		<include refid="global.pageEnd" />
	</select>

</sqlMap>

